"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["196"],{13678:function(e,s,t){t.r(s),t.d(s,{TaskResetPassword:()=>k}),t(65223);var i=t(73312),n=t(61869),r=t(11576),l=t(86988),a=t(64204),o=t(92418),d=t(2672),u=t(70431),c=t(92654),h=t(96352),p=t(54264),w=t(88870),m=t(86842),g=t(36788),y=t(25135);let k=(0,r.withCoreSessionSwitchGuard)((0,y.U)((0,d.withCardStateProvider)(()=>{var e,s,t,y,k,Z,v;let f=(0,n.cL)(),C=(0,d.useCardState)(),{userSettings:{passwordSettings:P}}=(0,r.useEnvironment)(),{t:b,locale:R}=(0,a.useLocalizations)(),{redirectUrlComplete:O}=(0,l.y2)(),{otherSessions:S}=(0,p.j)({user:f.user}),{navigateAfterSignOut:_,navigateAfterMultiSessionSingleSignOutUrl:z}=(0,r.useSignOutContext)(),A=(0,n.WZ)((e,s)=>e.updatePassword(...s)),{navigateOnSetActive:K}=(0,l.G)(),L=(0,g.Yp)("newPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,m.GM)(e,{t:b,locale:R,passwordSettings:P})}),I=(0,g.Yp)("confirmPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),T=(0,g.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,a.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:x,isPasswordMatch:F}=(0,h.p5)({passwordField:L,confirmPasswordField:I}),B=null!=(v=null==(s=f.user)||null==(e=s.primaryEmailAddress)?void 0:e.emailAddress)?v:null==(t=f.user)?void 0:t.username;return(0,i.tZ)(a.Flow.Root,{flow:"taskResetPassword",children:(0,i.tZ)(a.Flow.Part,{part:"resetPassword",children:(0,i.BX)(o.Z.Root,{children:[(0,i.BX)(o.Z.Content,{children:[(0,i.tZ)(c.h.Root,{showLogo:!0,children:(0,i.tZ)(c.h.Title,{localizationKey:(0,a.localizationKeys)("taskResetPassword.title")})}),(0,i.tZ)(o.Z.Alert,{children:C.error}),(0,i.tZ)(a.Col,{elementDescriptor:a.descriptors.main,gap:8,children:(0,i.BX)(u.l.Root,{onSubmit:()=>{C.runAsync(async()=>{if(f.user){L.clearFeedback(),I.clearFeedback();try{await A(f.user,[{newPassword:L.value,signOutOfOtherSessions:T.checked}]),await f.setActive({session:f.session,navigate:async e=>{let{session:s}=e;await (null==K?void 0:K({session:s,redirectUrlComplete:O}))}})}catch(e){return(0,w.S3)(e,[L,I],C.setError)}}})},onBlur:()=>{L.value&&x(I.value)},gap:8,children:[(0,i.BX)(a.Col,{gap:6,children:[(0,i.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:(null==(k=f.user)||null==(y=k.primaryEmailAddress)?void 0:y.emailAddress)||(null==(Z=f.user)?void 0:Z.username)||"",style:{display:"none"}}),(0,i.tZ)(u.l.ControlRow,{elementId:L.id,children:(0,i.tZ)(u.l.PasswordInput,{...L.props,isRequired:!0,minLength:6})}),(0,i.tZ)(u.l.ControlRow,{elementId:I.id,children:(0,i.tZ)(u.l.PasswordInput,{...I.props,onChange:e=>(e.target.value&&x(e.target.value),I.props.onChange(e))})}),(0,i.tZ)(u.l.ControlRow,{elementId:T.id,children:(0,i.tZ)(u.l.Checkbox,{...T.props})})]}),(0,i.tZ)(a.Col,{gap:3,children:(0,i.tZ)(u.l.SubmitButton,{isLoading:C.isLoading,isDisabled:!F,localizationKey:(0,a.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,i.tZ)(o.Z.Footer,{children:(0,i.BX)(o.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[B&&(0,i.tZ)(o.Z.ActionText,{truncate:!0,localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:B})}),(0,i.tZ)(o.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{var e;0===S.length?null==f||f.signOut(_):null==f||f.signOut(z,{sessionId:null==(e=f.session)?void 0:e.id})},localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))},25135:function(e,s,t){t.d(s,{U:()=>l});var i=t(95274),n=t(79281),r=t(86988);let l=(e,s)=>{let t=e.displayName||e.name||"Component";e.displayName=t;let l=t=>{let l=(0,r.G)();return(0,n.me)(e,e=>{var t;return!(null==(t=e.session)?void 0:t.currentTask)||e.session.currentTask.key!==s&&!e.__internal_setActiveInProgress},e=>{var s;let{clerk:t}=e;return t.session?null!=(s=l.redirectUrlComplete)?s:t.buildAfterSignInUrl():t.buildSignInUrl()},i.q.cannotRenderComponentWhenTaskDoesNotExist)(t)};return l.displayName="withTaskGuard(".concat(t,")"),l}}}]);