"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["8877"],{51618:function(e,t,r){r.r(t),r.d(t,{SessionTasks:()=>k});var s=r(73312),i=r(61869),o=r(67964),l=r(69144),n=r(64204),a=r(92418),d=r(2672),c=r(21455),u=r(76663),h=r(86988),Z=r(24676),w=r(33738),p=r(13678);let m=()=>{let e=(0,i.cL)(),{navigate:t}=(0,Z.useRouter)(),{redirectUrlComplete:r}=(0,h.G)();return(0,l.useEffect)(()=>{let r=setTimeout(()=>{var r,s;let i=null==(s=e.session)||null==(r=s.currentTask)?void 0:r.key;i&&t("./".concat(u.fr[i]))},500);return()=>clearTimeout(r)},[t,e,r]),(0,s.tZ)(n.Flow.Part,{part:"start",children:(0,s.BX)(a.Z.Root,{children:[(0,s.tZ)(a.Z.Content,{children:(0,s.tZ)(c.I,{})}),(0,s.tZ)(a.Z.Footer,{})]})})};function v(){let e=(0,h.G)();return(0,s.tZ)(n.Flow.Root,{flow:"tasks",children:(0,s.BX)(Z.Switch,{children:[(0,s.tZ)(Z.Route,{path:u.fr["choose-organization"],children:(0,s.tZ)(h.md.Provider,{value:{componentName:"TaskChooseOrganization",redirectUrlComplete:e.redirectUrlComplete},children:(0,s.tZ)(w.TaskChooseOrganization,{})})}),(0,s.tZ)(Z.Route,{path:u.fr["reset-password"],children:(0,s.tZ)(h.mf.Provider,{value:{componentName:"TaskResetPassword",redirectUrlComplete:e.redirectUrlComplete},children:(0,s.tZ)(p.TaskResetPassword,{})})}),(0,s.tZ)(Z.Route,{index:!0,children:(0,s.tZ)(m,{})})]})})}let k=(0,d.withCardStateProvider)(e=>{var t;let{redirectUrlComplete:r}=e,n=(0,i.cL)(),{navigate:d}=(0,Z.useRouter)(),u=(0,l.useRef)(null);return((0,l.useEffect)(()=>{var e,t,s;let i=null==(e=n.session)?void 0:e.currentTask;if(!i||(null==(t=n.session)?void 0:t.status)==="active")return void d(r);null==(s=n.telemetry)||s.record((0,o.Zg)("SessionTask",{task:i.key}))},[n,d,r]),null==(t=n.session)?void 0:t.currentTask)?(0,s.tZ)(h.Hs.Provider,{value:{redirectUrlComplete:r},children:(0,s.tZ)(v,{})}):(0,s.BX)(a.Z.Root,{sx:()=>{var e;return{minHeight:u?null==(e=u.current)?void 0:e.offsetHeight:void 0}},children:[(0,s.tZ)(a.Z.Content,{sx:()=>({flex:1}),children:(0,s.tZ)(c.I,{})}),(0,s.tZ)(a.Z.Footer,{})]})})},13678:function(e,t,r){r.r(t),r.d(t,{TaskResetPassword:()=>k}),r(65223);var s=r(73312),i=r(61869),o=r(11576),l=r(86988),n=r(64204),a=r(92418),d=r(2672),c=r(70431),u=r(92654),h=r(96352),Z=r(54264),w=r(88870),p=r(86842),m=r(36788),v=r(25135);let k=(0,o.withCoreSessionSwitchGuard)((0,v.U)((0,d.withCardStateProvider)(()=>{var e,t,r,v,k,f,g;let y=(0,i.cL)(),C=(0,d.useCardState)(),{userSettings:{passwordSettings:P}}=(0,o.useEnvironment)(),{t:R,locale:b}=(0,n.useLocalizations)(),{redirectUrlComplete:O}=(0,l.y2)(),{otherSessions:S}=(0,Z.j)({user:y.user}),{navigateAfterSignOut:T,navigateAfterMultiSessionSingleSignOutUrl:z}=(0,o.useSignOutContext)(),F=(0,i.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:L}=(0,l.G)(),x=(0,m.Yp)("newPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,p.GM)(e,{t:R,locale:b,passwordSettings:P})}),_=(0,m.Yp)("confirmPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),B=(0,m.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,n.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:K,isPasswordMatch:A}=(0,h.p5)({passwordField:x,confirmPasswordField:_}),I=null!=(g=null==(t=y.user)||null==(e=t.primaryEmailAddress)?void 0:e.emailAddress)?g:null==(r=y.user)?void 0:r.username;return(0,s.tZ)(n.Flow.Root,{flow:"taskResetPassword",children:(0,s.tZ)(n.Flow.Part,{part:"resetPassword",children:(0,s.BX)(a.Z.Root,{children:[(0,s.BX)(a.Z.Content,{children:[(0,s.tZ)(u.h.Root,{showLogo:!0,children:(0,s.tZ)(u.h.Title,{localizationKey:(0,n.localizationKeys)("taskResetPassword.title")})}),(0,s.tZ)(a.Z.Alert,{children:C.error}),(0,s.tZ)(n.Col,{elementDescriptor:n.descriptors.main,gap:8,children:(0,s.BX)(c.l.Root,{onSubmit:()=>{C.runAsync(async()=>{if(y.user){x.clearFeedback(),_.clearFeedback();try{await F(y.user,[{newPassword:x.value,signOutOfOtherSessions:B.checked}]),await y.setActive({session:y.session,navigate:async e=>{let{session:t}=e;await (null==L?void 0:L({session:t,redirectUrlComplete:O}))}})}catch(e){return(0,w.S3)(e,[x,_],C.setError)}}})},onBlur:()=>{x.value&&K(_.value)},gap:8,children:[(0,s.BX)(n.Col,{gap:6,children:[(0,s.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:(null==(k=y.user)||null==(v=k.primaryEmailAddress)?void 0:v.emailAddress)||(null==(f=y.user)?void 0:f.username)||"",style:{display:"none"}}),(0,s.tZ)(c.l.ControlRow,{elementId:x.id,children:(0,s.tZ)(c.l.PasswordInput,{...x.props,isRequired:!0,minLength:6})}),(0,s.tZ)(c.l.ControlRow,{elementId:_.id,children:(0,s.tZ)(c.l.PasswordInput,{..._.props,onChange:e=>(e.target.value&&K(e.target.value),_.props.onChange(e))})}),(0,s.tZ)(c.l.ControlRow,{elementId:B.id,children:(0,s.tZ)(c.l.Checkbox,{...B.props})})]}),(0,s.tZ)(n.Col,{gap:3,children:(0,s.tZ)(c.l.SubmitButton,{isLoading:C.isLoading,isDisabled:!A,localizationKey:(0,n.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,s.tZ)(a.Z.Footer,{children:(0,s.BX)(a.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[I&&(0,s.tZ)(a.Z.ActionText,{truncate:!0,localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:I})}),(0,s.tZ)(a.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{var e;0===S.length?null==y||y.signOut(T):null==y||y.signOut(z,{sessionId:null==(e=y.session)?void 0:e.id})},localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))}}]);