"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["196"],{3678:function(e,s,t){t.r(s),t.d(s,{TaskResetPassword:()=>k});var i=t(3312),r=t(1869),a=t(1576),n=t(6988),o=t(4204),l=t(2418),d=t(2672),c=t(431),u=t(2654),h=t(6352),p=t(4264),w=t(8870),m=t(6842),g=t(6788),y=t(5135);let k=(0,a.withCoreSessionSwitchGuard)((0,y.U)((0,d.withCardStateProvider)(()=>{let e=(0,r.cL)(),s=(0,d.useCardState)(),{userSettings:{passwordSettings:t}}=(0,a.useEnvironment)(),{t:y,locale:k}=(0,o.useLocalizations)(),{redirectUrlComplete:Z}=(0,n.y2)(),{otherSessions:f}=(0,p.j)({user:e.user}),{navigateAfterSignOut:C,navigateAfterMultiSessionSingleSignOutUrl:P}=(0,a.useSignOutContext)(),b=(0,r.WZ)((e,s)=>e.updatePassword(...s)),{navigateOnSetActive:R}=(0,n.G)(),O=(0,g.Yp)("newPassword","",{type:"password",label:(0,o.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,m.GM)(e,{t:y,locale:k,passwordSettings:t})}),S=(0,g.Yp)("confirmPassword","",{type:"password",label:(0,o.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),_=(0,g.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,o.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:v,isPasswordMatch:z}=(0,h.p5)({passwordField:O,confirmPasswordField:S}),A=e.user?.primaryEmailAddress?.emailAddress??e.user?.username;return(0,i.tZ)(o.Flow.Root,{flow:"taskResetPassword",children:(0,i.tZ)(o.Flow.Part,{part:"resetPassword",children:(0,i.BX)(l.Z.Root,{children:[(0,i.BX)(l.Z.Content,{children:[(0,i.tZ)(u.h.Root,{showLogo:!0,children:(0,i.tZ)(u.h.Title,{localizationKey:(0,o.localizationKeys)("taskResetPassword.title")})}),(0,i.tZ)(l.Z.Alert,{children:s.error}),(0,i.tZ)(o.Col,{elementDescriptor:o.descriptors.main,gap:8,children:(0,i.BX)(c.l.Root,{onSubmit:()=>{s.runAsync(async()=>{if(e.user){O.clearFeedback(),S.clearFeedback();try{await b(e.user,[{newPassword:O.value,signOutOfOtherSessions:_.checked}]),await e.setActive({session:e.session,navigate:async({session:e})=>{await R?.({session:e,redirectUrlComplete:Z})}})}catch(e){return(0,w.S3)(e,[O,S],s.setError)}}})},onBlur:()=>{O.value&&v(S.value)},gap:8,children:[(0,i.BX)(o.Col,{gap:6,children:[(0,i.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.user?.primaryEmailAddress?.emailAddress||e.user?.username||"",style:{display:"none"}}),(0,i.tZ)(c.l.ControlRow,{elementId:O.id,children:(0,i.tZ)(c.l.PasswordInput,{...O.props,isRequired:!0,minLength:6})}),(0,i.tZ)(c.l.ControlRow,{elementId:S.id,children:(0,i.tZ)(c.l.PasswordInput,{...S.props,onChange:e=>(e.target.value&&v(e.target.value),S.props.onChange(e))})}),(0,i.tZ)(c.l.ControlRow,{elementId:_.id,children:(0,i.tZ)(c.l.Checkbox,{..._.props})})]}),(0,i.tZ)(o.Col,{gap:3,children:(0,i.tZ)(c.l.SubmitButton,{isLoading:s.isLoading,isDisabled:!z,localizationKey:(0,o.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,i.tZ)(l.Z.Footer,{children:(0,i.BX)(l.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[A&&(0,i.tZ)(l.Z.ActionText,{truncate:!0,localizationKey:(0,o.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:A})}),(0,i.tZ)(l.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{0===f.length?e?.signOut(C):e?.signOut(P,{sessionId:e.session?.id})},localizationKey:(0,o.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))},5135:function(e,s,t){t.d(s,{U:()=>n});var i=t(5274),r=t(9281),a=t(6988);let n=(e,s)=>{let t=e.displayName||e.name||"Component";e.displayName=t;let n=t=>{let n=(0,a.G)();return(0,r.me)(e,e=>!e.session?.currentTask||e.session.currentTask.key!==s&&!e.__internal_setActiveInProgress,({clerk:e})=>e.session?n.redirectUrlComplete??e.buildAfterSignInUrl():e.buildSignInUrl(),i.q.cannotRenderComponentWhenTaskDoesNotExist)(t)};return n.displayName=`withTaskGuard(${t})`,n}}}]);